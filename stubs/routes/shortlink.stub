{{{
  exports({ to: app.startPath(filePath, fileName) })
}}}
/**
 * Shortlink routes
 *
 * Include this file in your main routes file to enable shortlink functionality
 *
 * Usage in start/routes.ts:
 *   import './shortlinks.js'
 */

import router from '@adonisjs/core/services/router'
import shortlinkConfig from '#config/shortlink'

const ShortlinkController = () => import('#controllers/shortlink_controller')

/**
  * Shortlink redirect route
  */
router.get('/:slug', [ShortlinkController, 'redirect'])
  .as('shortlink.redirect')
  .prefix(shortlinkConfig.prefix ?? '')
  .domain(shortlinkConfig.domain)
  .middleware([]) // add your middleware/throttler here

/**
  * API routes for shortlink management
  */
router.group(() => {
  router.get('/shortlinks/:slug', [ShortlinkController, 'show']).as('shortlink.show')
  router.post('/shortlinks', [ShortlinkController, 'store']).as('shortlink.store')
  router.delete('/shortlinks/:slug', [ShortlinkController, 'destroy']).as('shortlink.destroy')
})
  .prefix('api')
  .middleware([]) // add your middleware/throttler here